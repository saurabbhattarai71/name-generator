<template>
  <nav class="bg-white shadow-md py-2 w-full mx-auto">
    <div class="container mx-auto flex justify-between items-center">
      <div class="flex items-center space-x-10">
        <div class="text-black text-xl font-bold flex items-center">
          <svg id="redirectHome" class="cursor-pointer" width="150" height="50" viewBox="0 0 1523 270" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_5_29)">
              <rect width="270" height="270" rx="100" fill="#FF8F0B"/>
              <path d="M180.161 174.284L166.962 184.846L250.51 289.25C253.427 292.895 258.746 293.485 262.391 290.568V290.568C266.036 287.652 266.626 282.333 263.709 278.688L180.161 174.284Z" fill="white"/>
              <path d="M144.657 129.918C141.741 126.273 136.421 125.683 132.777 128.599V128.599C129.132 131.516 128.542 136.835 131.458 140.48L161.703 178.274L174.901 167.712L144.657 129.918Z" fill="white" fill-opacity="0.9"/>
              <path d="M140.359 99.5661C130.129 99.057 121.456 95.0737 114.341 87.6161C107.226 80.1586 103.669 71.2629 103.669 60.9292C103.669 71.2629 100.098 80.1586 92.9579 87.6161C85.8174 95.0737 77.1323 99.057 66.9027 99.5661C73.638 99.8715 79.8163 101.793 85.4375 105.331C91.0588 108.869 95.5026 113.552 98.769 119.381C102.035 125.209 103.669 131.534 103.669 138.356C103.669 127.971 107.226 119.037 114.341 111.554C121.456 104.071 130.129 100.075 140.359 99.5661Z" fill="white"/>
              <circle cx="6.45221" cy="6.45221" r="6.45221" transform="matrix(-1 0 0 1 152.868 55.5882)" fill="white"/>
              <circle cx="6.45221" cy="6.45221" r="6.45221" transform="matrix(-1 0 0 1 98.2721 156.838)" fill="white"/>
              <path d="M152.868 196.517C149.273 196.334 146.226 194.904 143.726 192.227C141.227 189.55 139.977 186.357 139.977 182.647C139.977 186.357 138.722 189.55 136.213 192.227C133.705 194.904 130.653 196.334 127.059 196.517C129.425 196.626 131.596 197.316 133.571 198.586C135.546 199.856 137.107 201.537 138.255 203.63C139.403 205.722 139.977 207.993 139.977 210.441C139.977 206.713 141.227 203.506 143.726 200.82C146.226 198.134 149.273 196.699 152.868 196.517Z" fill="white"/>
              <path d="M175.699 111.155C172.934 111.011 170.59 109.888 168.667 107.784C166.744 105.681 165.782 103.172 165.782 100.257C165.782 103.172 164.817 105.681 162.888 107.784C160.958 109.888 158.61 111.011 155.846 111.155C157.666 111.241 159.336 111.783 160.855 112.781C162.374 113.779 163.575 115.1 164.458 116.744C165.341 118.388 165.782 120.172 165.782 122.096C165.782 119.167 166.744 116.647 168.667 114.536C170.59 112.426 172.934 111.299 175.699 111.155Z" fill="white"/>
              <path d="M105.221 42.6584C101.626 42.4887 98.5793 41.1609 96.0794 38.6751C93.5795 36.1892 92.3295 33.224 92.3295 29.7794C92.3295 33.224 91.0751 36.1892 88.5663 38.6751C86.0575 41.1609 83.006 42.4887 79.4118 42.6584C81.7782 42.7602 83.949 43.4007 85.924 44.58C87.899 45.7593 89.4604 47.3204 90.608 49.2633C91.7557 51.2062 92.3295 53.3145 92.3295 55.5882C92.3295 52.1267 93.5795 49.1488 96.0794 46.6544C98.5793 44.1601 101.626 42.8281 105.221 42.6584Z" fill="white"/>
              <path d="M61.5441 106.19C58.5029 106.033 55.9246 104.807 53.8093 102.513C51.694 100.218 50.6363 97.4811 50.6363 94.3015C50.6363 97.4811 49.5749 100.218 47.452 102.513C45.3292 104.807 42.7471 106.033 39.7059 106.19C41.7083 106.284 43.5451 106.875 45.2163 107.964C46.8874 109.052 48.2086 110.493 49.1797 112.287C50.1508 114.08 50.6363 116.026 50.6363 118.125C50.6363 114.93 51.694 112.181 53.8093 109.878C55.9246 107.576 58.5029 106.346 61.5441 106.19Z" fill="white"/>
              </g>
              <path d="M405.7 112.75C403 107.55 399.25 103.65 394.45 101.05C389.65 98.35 384.1 97 377.8 97C370.9 97 364.75 98.55 359.35 101.65C353.95 104.75 349.7 109.15 346.6 114.85C343.6 120.55 342.1 127.15 342.1 134.65C342.1 142.15 343.6 148.8 346.6 154.6C349.7 160.3 353.95 164.7 359.35 167.8C364.75 170.9 370.9 172.45 377.8 172.45C387.1 172.45 394.65 169.85 400.45 164.65C406.25 159.45 409.8 152.4 411.1 143.5H371.95V129.85H429.4V143.2C428.3 151.3 425.4 158.75 420.7 165.55C416.1 172.35 410.05 177.8 402.55 181.9C395.15 185.9 386.9 187.9 377.8 187.9C368 187.9 359.05 185.65 350.95 181.15C342.85 176.55 336.4 170.2 331.6 162.1C326.9 154 324.55 144.85 324.55 134.65C324.55 124.45 326.9 115.3 331.6 107.2C336.4 99.1 342.85 92.8 350.95 88.3C359.15 83.7 368.1 81.4 377.8 81.4C388.9 81.4 398.75 84.15 407.35 89.65C416.05 95.05 422.35 102.75 426.25 112.75H405.7ZM522.016 143.65C522.016 146.75 521.816 149.55 521.416 152.05H458.266C458.766 158.65 461.216 163.95 465.616 167.95C470.016 171.95 475.416 173.95 481.816 173.95C491.016 173.95 497.516 170.1 501.316 162.4H519.766C517.266 170 512.716 176.25 506.116 181.15C499.616 185.95 491.516 188.35 481.816 188.35C473.916 188.35 466.816 186.6 460.516 183.1C454.316 179.5 449.416 174.5 445.816 168.1C442.316 161.6 440.566 154.1 440.566 145.6C440.566 137.1 442.266 129.65 445.666 123.25C449.166 116.75 454.016 111.75 460.216 108.25C466.516 104.75 473.716 103 481.816 103C489.616 103 496.566 104.7 502.666 108.1C508.766 111.5 513.516 116.3 516.916 122.5C520.316 128.6 522.016 135.65 522.016 143.65ZM504.166 138.25C504.066 131.95 501.816 126.9 497.416 123.1C493.016 119.3 487.566 117.4 481.066 117.4C475.166 117.4 470.116 119.3 465.916 123.1C461.716 126.8 459.216 131.85 458.416 138.25H504.166ZM580.544 103C587.044 103 592.844 104.35 597.944 107.05C603.144 109.75 607.194 113.75 610.094 119.05C612.994 124.35 614.444 130.75 614.444 138.25V187H597.494V140.8C597.494 133.4 595.644 127.75 591.944 123.85C588.244 119.85 583.194 117.85 576.794 117.85C570.394 117.85 565.294 119.85 561.494 123.85C557.794 127.75 555.944 133.4 555.944 140.8V187H538.844V104.35H555.944V113.8C558.744 110.4 562.294 107.75 566.594 105.85C570.994 103.95 575.644 103 580.544 103ZM712.006 143.65C712.006 146.75 711.806 149.55 711.406 152.05H648.256C648.756 158.65 651.206 163.95 655.606 167.95C660.006 171.95 665.406 173.95 671.806 173.95C681.006 173.95 687.506 170.1 691.306 162.4H709.756C707.256 170 702.706 176.25 696.106 181.15C689.606 185.95 681.506 188.35 671.806 188.35C663.906 188.35 656.806 186.6 650.506 183.1C644.306 179.5 639.406 174.5 635.806 168.1C632.306 161.6 630.556 154.1 630.556 145.6C630.556 137.1 632.256 129.65 635.656 123.25C639.156 116.75 644.006 111.75 650.206 108.25C656.506 104.75 663.706 103 671.806 103C679.606 103 686.556 104.7 692.656 108.1C698.756 111.5 703.506 116.3 706.906 122.5C710.306 128.6 712.006 135.65 712.006 143.65ZM694.156 138.25C694.056 131.95 691.806 126.9 687.406 123.1C683.006 119.3 677.556 117.4 671.056 117.4C665.156 117.4 660.106 119.3 655.906 123.1C651.706 126.8 649.206 131.85 648.406 138.25H694.156ZM745.934 116.35C748.434 112.15 751.734 108.9 755.834 106.6C760.034 104.2 764.984 103 770.684 103V120.7H766.334C759.634 120.7 754.534 122.4 751.034 125.8C747.634 129.2 745.934 135.1 745.934 143.5V187H728.834V104.35H745.934V116.35ZM780.702 145.3C780.702 137 782.402 129.65 785.802 123.25C789.302 116.85 794.002 111.9 799.902 108.4C805.902 104.8 812.502 103 819.702 103C826.202 103 831.852 104.3 836.652 106.9C841.552 109.4 845.452 112.55 848.352 116.35V104.35H865.602V187H848.352V174.7C845.452 178.6 841.502 181.85 836.502 184.45C831.502 187.05 825.802 188.35 819.402 188.35C812.302 188.35 805.802 186.55 799.902 182.95C794.002 179.25 789.302 174.15 785.802 167.65C782.402 161.05 780.702 153.6 780.702 145.3ZM848.352 145.6C848.352 139.9 847.152 134.95 844.752 130.75C842.452 126.55 839.402 123.35 835.602 121.15C831.802 118.95 827.702 117.85 823.302 117.85C818.902 117.85 814.802 118.95 811.002 121.15C807.202 123.25 804.102 126.4 801.702 130.6C799.402 134.7 798.252 139.6 798.252 145.3C798.252 151 799.402 156 801.702 160.3C804.102 164.6 807.202 167.9 811.002 170.2C814.902 172.4 819.002 173.5 823.302 173.5C827.702 173.5 831.802 172.4 835.602 170.2C839.402 168 842.452 164.8 844.752 160.6C847.152 156.3 848.352 151.3 848.352 145.6ZM908.013 118.3V164.05C908.013 167.15 908.713 169.4 910.113 170.8C911.613 172.1 914.113 172.75 917.613 172.75H928.113V187H914.613C906.913 187 901.013 185.2 896.913 181.6C892.813 178 890.763 172.15 890.763 164.05V118.3H881.013V104.35H890.763V83.8H908.013V104.35H928.113V118.3H908.013ZM1019.62 143.65C1019.62 146.75 1019.42 149.55 1019.02 152.05H955.873C956.373 158.65 958.823 163.95 963.223 167.95C967.623 171.95 973.023 173.95 979.423 173.95C988.623 173.95 995.123 170.1 998.923 162.4H1017.37C1014.87 170 1010.32 176.25 1003.72 181.15C997.223 185.95 989.123 188.35 979.423 188.35C971.523 188.35 964.423 186.6 958.123 183.1C951.923 179.5 947.023 174.5 943.423 168.1C939.923 161.6 938.173 154.1 938.173 145.6C938.173 137.1 939.873 129.65 943.273 123.25C946.773 116.75 951.623 111.75 957.823 108.25C964.123 104.75 971.323 103 979.423 103C987.223 103 994.173 104.7 1000.27 108.1C1006.37 111.5 1011.12 116.3 1014.52 122.5C1017.92 128.6 1019.62 135.65 1019.62 143.65ZM1001.77 138.25C1001.67 131.95 999.423 126.9 995.023 123.1C990.623 119.3 985.173 117.4 978.673 117.4C972.773 117.4 967.723 119.3 963.523 123.1C959.323 126.8 956.823 131.85 956.023 138.25H1001.77ZM1161.07 187H1143.97L1092.52 109.15V187H1075.42V82.6H1092.52L1143.97 160.3V82.6H1161.07V187ZM1177.82 145.3C1177.82 137 1179.52 129.65 1182.92 123.25C1186.42 116.85 1191.12 111.9 1197.02 108.4C1203.02 104.8 1209.62 103 1216.82 103C1223.32 103 1228.97 104.3 1233.77 106.9C1238.67 109.4 1242.57 112.55 1245.47 116.35V104.35H1262.72V187H1245.47V174.7C1242.57 178.6 1238.62 181.85 1233.62 184.45C1228.62 187.05 1222.92 188.35 1216.52 188.35C1209.42 188.35 1202.92 186.55 1197.02 182.95C1191.12 179.25 1186.42 174.15 1182.92 167.65C1179.52 161.05 1177.82 153.6 1177.82 145.3ZM1245.47 145.6C1245.47 139.9 1244.27 134.95 1241.87 130.75C1239.57 126.55 1236.52 123.35 1232.72 121.15C1228.92 118.95 1224.82 117.85 1220.42 117.85C1216.02 117.85 1211.92 118.95 1208.12 121.15C1204.32 123.25 1201.22 126.4 1198.82 130.6C1196.52 134.7 1195.37 139.6 1195.37 145.3C1195.37 151 1196.52 156 1198.82 160.3C1201.22 164.6 1204.32 167.9 1208.12 170.2C1212.02 172.4 1216.12 173.5 1220.42 173.5C1224.82 173.5 1228.92 172.4 1232.72 170.2C1236.52 168 1239.57 164.8 1241.87 160.6C1244.27 156.3 1245.47 151.3 1245.47 145.6ZM1385.23 103C1391.73 103 1397.53 104.35 1402.63 107.05C1407.83 109.75 1411.88 113.75 1414.78 119.05C1417.78 124.35 1419.28 130.75 1419.28 138.25V187H1402.33V140.8C1402.33 133.4 1400.48 127.75 1396.78 123.85C1393.08 119.85 1388.03 117.85 1381.63 117.85C1375.23 117.85 1370.13 119.85 1366.33 123.85C1362.63 127.75 1360.78 133.4 1360.78 140.8V187H1343.83V140.8C1343.83 133.4 1341.98 127.75 1338.28 123.85C1334.58 119.85 1329.53 117.85 1323.13 117.85C1316.73 117.85 1311.63 119.85 1307.83 123.85C1304.13 127.75 1302.28 133.4 1302.28 140.8V187H1285.18V104.35H1302.28V113.8C1305.08 110.4 1308.63 107.75 1312.93 105.85C1317.23 103.95 1321.83 103 1326.73 103C1333.33 103 1339.23 104.4 1344.43 107.2C1349.63 110 1353.63 114.05 1356.43 119.35C1358.93 114.35 1362.83 110.4 1368.13 107.5C1373.43 104.5 1379.13 103 1385.23 103ZM1516.79 143.65C1516.79 146.75 1516.59 149.55 1516.19 152.05H1453.04C1453.54 158.65 1455.99 163.95 1460.39 167.95C1464.79 171.95 1470.19 173.95 1476.59 173.95C1485.79 173.95 1492.29 170.1 1496.09 162.4H1514.54C1512.04 170 1507.49 176.25 1500.89 181.15C1494.39 185.95 1486.29 188.35 1476.59 188.35C1468.69 188.35 1461.59 186.6 1455.29 183.1C1449.09 179.5 1444.19 174.5 1440.59 168.1C1437.09 161.6 1435.34 154.1 1435.34 145.6C1435.34 137.1 1437.04 129.65 1440.44 123.25C1443.94 116.75 1448.79 111.75 1454.99 108.25C1461.29 104.75 1468.49 103 1476.59 103C1484.39 103 1491.34 104.7 1497.44 108.1C1503.54 111.5 1508.29 116.3 1511.69 122.5C1515.09 128.6 1516.79 135.65 1516.79 143.65ZM1498.94 138.25C1498.84 131.95 1496.59 126.9 1492.19 123.1C1487.79 119.3 1482.34 117.4 1475.84 117.4C1469.94 117.4 1464.89 119.3 1460.69 123.1C1456.49 126.8 1453.99 131.85 1453.19 138.25H1498.94Z" fill="black"/>
              <path d="M1388 86.9152C1399.42 86.3498 1409.1 81.9254 1417.04 73.642C1424.99 65.3586 1428.96 55.478 1428.96 44C1428.96 55.478 1432.94 65.3586 1440.91 73.642C1448.89 81.9254 1458.58 86.3498 1470 86.9152C1462.48 87.2544 1455.58 89.3889 1449.31 93.3185C1443.03 97.2482 1438.07 102.45 1434.43 108.924C1430.78 115.398 1428.96 122.423 1428.96 130C1428.96 118.465 1424.99 108.542 1417.04 100.231C1409.1 91.9191 1399.42 87.4806 1388 86.9152Z" fill="#FF8F0B"/>
              <defs>
              <clipPath id="clip0_5_29">
              <rect width="270" height="270" rx="100" fill="white"/>
              </clipPath>
              </defs>
  
  
          </svg>
        </div>
        <div class="hidden md:flex space-x-4 gap-5">
          <a href="/trends" class="font-[inter] text-gray-600 gap-2 hover:text-black hover:font-bold hover:bg-gray-100 p-2 rounded">Trends</a>
          <a href="#" class="font-[inter] text-gray-600 gap-2 hover:text-black hover:font-bold hover:bg-gray-100 p-2 rounded">Baby Names</a>
          <a href="#" class="font-[inter] text-gray-600 gap-2 hover:text-black hover:font-bold hover:bg-gray-100 p-2 rounded">Ship Names</a>
          <a href="#" class="font-[inter] text-gray-600 gap-2 hover:text-black hover:font-bold hover:bg-gray-100 p-2 rounded">All Categories</a>
        </div>
      </div>
      <div class="flex items-center space-x-4">
        <a id="savedItems" href="#" class="text-gray-600 hover:text-black flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-5 h-5 mr-2 font-bold">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
          </svg>
          <h3 class="text-black font-semibold">Saved items {{ savedNames.length }} </h3>
        </a>
        <button class="group relative inline-flex h-12 items-center justify-center rounded-md px-6 font-medium text-black"><span>Blogs</span>
          <div class="relative ml-1 h-5 w-5 overflow-hidden">
            <div class="absolute transition-all duration-200 group-hover:-translate-y-5 group-hover:translate-x-4">
              <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5">
                <path d="M3.64645 11.3536C3.45118 11.1583 3.45118 10.8417 3.64645 10.6465L10.2929 4L6 4C5.72386 4 5.5 3.77614 5.5 3.5C5.5 3.22386 5.72386 3 6 3L11.5 3C11.6326 3 11.7598 3.05268 11.8536 3.14645C11.9473 3.24022 12 3.36739 12 3.5L12 9.00001C12 9.27615 11.7761 9.50001 11.5 9.50001C11.2239 9.50001 11 9.27615 11 9.00001V4.70711L4.35355 11.3536C4.15829 11.5488 3.84171 11.5488 3.64645 11.3536Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path>
              </svg>
              <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 -translate-x-4">
                <path d="M3.64645 11.3536C3.45118 11.1583 3.45118 10.8417 3.64645 10.6465L10.2929 4L6 4C5.72386 4 5.5 3.77614 5.5 3.5C5.5 3.22386 5.72386 3 6 3L11.5 3C11.6326 3 11.7598 3.05268 11.8536 3.14645C11.9473 3.24022 12 3.36739 12 3.5L12 9.00001C12 9.27615 11.7761 9.50001 11.5 9.50001C11.2239 9.50001 11 9.27615 11 9.00001V4.70711L4.35355 11.3536C4.15829 11.5488 3.84171 11.5488 3.64645 11.3536Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path>
              </svg>
            </div>
          </div>
        </button>
        <button class="bg-black text-white px-4 py-2 rounded-[50px]">Feedbacks</button>
      </div>
    </div>
  </nav>

  <!--  Modal component  -->
  <div id="savedItemsModal" class="fixed inset-0 z-50 bg-gray-800 bg-opacity-75 flex items-center justify-center hidden">
    <!-- Modal content -->
    <div class="bg-white rounded-lg shadow-lg p-6 w-full max-w-2xl h-3/4 relative">
      <span id="closeModal" class="text-gray-500 hover:text-gray-800 cursor-pointer absolute top-4 right-4 text-2xl">&times;</span>
      <p class="text-center font-bold text-2xl">Saved Items</p>
      <div class="border-2 border-black p-6 text-center">
        Saved names:
        <div class="border-t-2 border-gray-300 mt-4 pt-4">
          <div class="grid grid-cols-2 gap-4">
            <div v-for="(name, index) in savedNames" :key="index" class="flex items-center justify-between bg-gray-100 p-4 rounded-lg shadow-sm">
              <button @click="deleteName(index)" class="text-red-500 hover:text-red-800 font-bold mr-2">&times;</button>
              <span class="flex-1 text-center">{{ name }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


</template>

<script>
import eventBus from '../EventHandler/eventBus.js';

export default {   
  data() {
    return {
      savedNames: [],
    };  
  },
  name: 'Navbar', 
  methods: {
    goToHome() {
      window.location.href = '/';
    },
    showModal() {
      console.log('Show modal called');
      const modal = document.querySelector('#savedItemsModal');
      if (modal) {
        modal.classList.remove('hidden');
      }
    },
    hideModal() {
      console.log('Hide modal called');
      const modal = document.querySelector('#savedItemsModal');
      if (modal) {
        modal.classList.add('hidden');
      }
    }, 
    retrieveNames(){
      let savedNamesArray = JSON.parse(localStorage.getItem('savedNames')) || [];

      if (!Array.isArray(savedNamesArray)) {
        savedNamesArray = [];
      } 
      
      this.savedNames = savedNamesArray;
      console.log("retrieved Names:",this.savedNames);
    },

    deleteName(name) {
      this.savedNames.splice(name,1);
      localStorage.setItem('savedNames', JSON.stringify(this.savedNames));
      console.log("deleted name:", name);
    },
},

  mounted() {
    const redirect_to_home = document.querySelector('#redirectHome');
    if (redirect_to_home) {
      redirect_to_home.addEventListener('click', this.goToHome);
    }

    const savedItems = document.querySelector('#savedItems');
    if (savedItems) {
      savedItems.addEventListener('click', this.showModal);
    }

    const closeModal = document.querySelector('#closeModal');
    if (closeModal) {
      closeModal.addEventListener('click', this.hideModal);
    }   
    {
    // Automatically retrieve names when the component is mounted
    this.retrieveNames();

    eventBus.on('name-saved',this.retrieveNames); 
  } 

  this.savedNames = JSON.parse(localStorage.getItem('savedNames')) || [];
  },
  
};
</script>

<style scoped>
</style>